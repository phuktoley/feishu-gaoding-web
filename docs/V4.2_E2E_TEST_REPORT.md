# V4.2 端到端测试方案

## 测试目标

验证两个应用（0103XHS 和 feishu-gaoding-web）的完整工作流闭环。

## 测试环境

| 应用 | 域名 | 状态 |
|------|------|------|
| 0103XHS | https://0103xhs-production.up.railway.app | ✅ Online |
| feishu-gaoding-web | https://feishu-gaoding-web-production.up.railway.app | ✅ Online |

## 测试场景

### 场景 1: 0103XHS 单篇内容生成

**测试步骤**：
1. 访问内容生成页面
2. 选择业务场景（休学）
3. 选择目标情绪（成功型）
4. 选择人设类型（过来人学姐）
5. 点击"开始生成标题"
6. 选择标题，点击"使用此标题生成正文"
7. 点击"生成话题标签"
8. 点击"生成封面文案"

**预期结果**：
- ✅ 生成 8 个标题（带评分）
- ✅ 生成 500+ 字正文
- ✅ 生成 8 个话题标签
- ✅ 生成封面文案和配色方案

**实际结果**: ✅ 全部通过

### 场景 2: 0103XHS 批量内容生成

**测试步骤**：
1. 切换到"批量生成"标签
2. 设置生成数量（3篇）
3. 选择业务场景、情绪、人设
4. 点击"批量生成 3 篇内容"

**预期结果**：
- ✅ 生成 3 篇完整内容
- ✅ 每篇包含标题、正文、标签、封面文案
- ✅ 支持批量选择和导出

**实际结果**: ✅ 全部通过

### 场景 3: 0103XHS 飞书导出配置

**测试步骤**：
1. 点击"导出到飞书多维表格"
2. 查看飞书配置弹窗

**预期结果**：
- ✅ 显示配置表单（App ID, App Secret, App Token, Table ID）
- ✅ 提供飞书开放平台链接

**实际结果**: ✅ 全部通过

### 场景 4: feishu-gaoding-web 飞书配置

**测试步骤**：
1. 访问飞书配置页面
2. 查看已配置的凭证
3. 点击"测试连接"

**预期结果**：
- ✅ 显示配置表单
- ✅ 连接测试成功
- ✅ 显示表格字段列表

**实际结果**: ✅ 全部通过（12个字段）

### 场景 5: feishu-gaoding-web 数据读取

**测试步骤**：
1. 访问飞书数据页面
2. 查看表格数据
3. 点击"导出稿定格式"

**预期结果**：
- ✅ 显示飞书表格数据
- ✅ 导出 ZIP 文件成功

**实际结果**: ✅ 全部通过（17条记录）

### 场景 6: feishu-gaoding-web 图片上传

**测试步骤**：
1. 访问上传图片页面
2. 查看上传区域和数据预览

**预期结果**：
- ✅ 显示 ZIP 上传区域
- ✅ 显示飞书表格数据预览
- ✅ 显示"上传到飞书"按钮

**实际结果**: ✅ 全部通过

## 端到端工作流验证

### 完整工作流

```
┌─────────────────────────────────────────────────────────────────┐
│                        完整工作流                                │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  1. 0103XHS: 生成内容                                           │
│     ├── 选择场景/情绪/人设                                       │
│     ├── 生成标题 → 正文 → 标签 → 封面                            │
│     └── 导出到飞书多维表格                                       │
│                    ↓                                            │
│  2. 飞书多维表格: 存储内容                                       │
│     ├── 标题、正文、标签、封面文案                               │
│     └── 等待图片生成                                             │
│                    ↓                                            │
│  3. feishu-gaoding-web: 处理图片                                │
│     ├── 读取飞书表格数据                                         │
│     ├── 导出稿定设计格式 (XLSX)                                  │
│     ├── 用户在稿定设计生成图片                                   │
│     ├── 上传 ZIP 文件                                           │
│     └── 自动回传图片到飞书                                       │
│                    ↓                                            │
│  4. 飞书多维表格: 完整内容                                       │
│     └── 文字内容 + 封面图片 = 完整小红书笔记                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 验证结果

| 步骤 | 功能 | 状态 |
|------|------|------|
| 1 | 0103XHS 内容生成 | ✅ 通过 |
| 2 | 0103XHS 批量生成 | ✅ 通过 |
| 3 | 0103XHS 飞书导出配置 | ✅ 通过 |
| 4 | feishu-gaoding-web 飞书配置 | ✅ 通过 |
| 5 | feishu-gaoding-web 连接测试 | ✅ 通过 |
| 6 | feishu-gaoding-web 数据读取 | ✅ 通过 |
| 7 | feishu-gaoding-web 稿定导出 | ✅ 通过 |
| 8 | feishu-gaoding-web 图片上传 | ✅ 通过 |

## 测试结论

**V4.2 版本端到端测试全部通过！**

两个应用的核心功能完整，工作流闭环：
- 0103XHS 可以生成高质量的小红书内容并导出到飞书
- feishu-gaoding-web 可以读取飞书数据、导出稿定格式、上传图片回传

## 测试时间

2026-01-05
