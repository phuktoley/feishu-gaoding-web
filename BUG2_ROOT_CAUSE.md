# Bug 2 根因分析：飞书上传ZIP失败

## 问题现象

用户上传ZIP文件后，点击"上传到飞书"按钮，显示10张图片全部上传失败。

## 根因分析

通过查看Railway部署日志，发现问题分为两个阶段：

### 阶段1：图片上传到飞书云存储 ✅ 成功

```
[飞书上传] 开始上传图片: 页面1.png, 大小: 3359 字节
[飞书上传] 响应: {"code":0,"data":{"file_token":"VOASbHC2MoXC35xYy6uclAXFnVe"},"msg":"Success"}
[飞书上传] 上传成功, file_token: VOASbHC2MoXC35xYy6uclAXFnVe
```

### 阶段2：更新飞书记录（附件字段）❌ 失败

```
[上传图片] 失败: 页面1.png, 错误: 更新记录失败: {
  "code": 1254045,
  "msg": "FieldNameNotFound",
  "error": {
    "message": "Invalid request parameter: 'fields.封面图片'. field_name not found."
  }
}
```

## 问题根因

**这不是代码bug，而是飞书表格配置问题。**

通过测试连接功能查看飞书表格字段，发现表格共有11个字段：文本、标题、正文、话题标签、封面主文案、封面副文案、业务场景、目标情绪、人设类型、学校、创建时间。

表格中**没有**名为 `封面图片` 的附件类型字段，所以更新记录时报错"字段名未找到"。

## 解决方案

用户需要在飞书多维表格中添加一个**附件类型**的字段，字段名设为 `封面图片`（或者修改配置页面中的"图片字段名称"为实际存在的附件字段名）。

### 操作步骤

1. 打开飞书多维表格
2. 点击添加字段（列）
3. 选择字段类型为"附件"
4. 将字段名设为 `封面图片`
5. 保存后重新尝试上传

### 代码已支持自定义字段名

代码中已经支持通过配置页面设置自定义的图片字段名称：

- 配置页面：`/settings` 中有"图片字段名称"输入框
- 数据库字段：`feishu_config.imageFieldName`
- 默认值：`封面图片`

用户可以根据自己飞书表格中的实际附件字段名进行配置。

## 结论

Bug 2 的根因是用户的飞书多维表格中缺少附件类型的字段，而非代码问题。代码逻辑正确，已支持自定义字段名配置。
