# 飞书-稿定设计自动化工具 端到端测试用例集合

## 版本信息
- **版本**: V4.1
- **创建日期**: 2026-01-05
- **最后更新**: 2026-01-05

## 测试环境
- **部署平台**: Railway
- **部署URL**: https://feishu-gaoding-web-production.up.railway.app
- **浏览器**: Chrome/Edge 最新版本

---

## 一、首页功能测试

### TC-001: 首页加载测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证首页能正常加载并显示所有元素 |
| **前置条件** | 无 |
| **测试步骤** | 1. 访问应用URL<br>2. 等待页面加载完成 |
| **预期结果** | - 页面正常加载，无报错<br>- 导航菜单显示：首页、飞书配置、飞书数据、上传图片<br>- 步骤说明卡片正确显示 |
| **验证状态** | [ ] 待验证 |

### TC-002: 导航菜单测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证导航菜单能正确跳转到各页面 |
| **前置条件** | 首页已加载 |
| **测试步骤** | 1. 点击"飞书配置"<br>2. 点击"飞书数据"<br>3. 点击"上传图片"<br>4. 点击"首页" |
| **预期结果** | 每次点击都能正确跳转到对应页面 |
| **验证状态** | [ ] 待验证 |

---

## 二、飞书配置功能测试

### TC-003: 飞书配置页面加载
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证飞书配置页面能正常加载 |
| **前置条件** | 无 |
| **测试步骤** | 1. 点击导航菜单"飞书配置" |
| **预期结果** | - 配置表单正常显示<br>- 包含字段：App ID、App Secret、App Token、Table ID、图片字段名 |
| **验证状态** | [ ] 待验证 |

### TC-004: 保存飞书配置
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证能正确保存飞书配置 |
| **前置条件** | 飞书配置页面已加载 |
| **测试步骤** | 1. 填写 App ID: cli_a9dcabca84785cd1<br>2. 填写 App Secret: D2UeA0RgzNC9anl2cAvBTceTP7HCmgfS<br>3. 填写 App Token: PJvZbmCDKa6iZnsn6Atc9m5fnWc<br>4. 填写 Table ID: tblJI8DTafcqas66<br>5. 图片字段名保持默认"封面图片"<br>6. 点击"保存配置" |
| **预期结果** | - 显示"保存成功"提示<br>- 刷新页面后配置仍然存在 |
| **验证状态** | [ ] 待验证 |

### TC-005: 测试飞书连接
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证能正确测试飞书连接 |
| **前置条件** | 飞书配置已保存 |
| **测试步骤** | 1. 点击"测试连接" |
| **预期结果** | - 显示"连接成功"提示<br>- 显示表格字段数量 |
| **验证状态** | [ ] 待验证 |

### TC-006: 无效配置测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证无效配置能正确提示错误 |
| **前置条件** | 无 |
| **测试步骤** | 1. 填写错误的 App ID/Secret<br>2. 点击"测试连接" |
| **预期结果** | 显示连接失败的错误提示 |
| **验证状态** | [ ] 待验证 |

---

## 三、飞书数据功能测试

### TC-007: 飞书数据页面加载
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证飞书数据页面能正常加载并显示数据 |
| **前置条件** | 飞书配置已正确保存 |
| **测试步骤** | 1. 点击导航菜单"飞书数据" |
| **预期结果** | - 页面正常加载<br>- 显示数据表格<br>- 表头包含：页面、文本_1 (主标题)、文本_2 (副标题)<br>- 显示记录总数 |
| **验证状态** | [ ] 待验证 |

### TC-008: 刷新数据
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证刷新按钮能重新获取数据 |
| **前置条件** | 飞书数据页面已加载 |
| **测试步骤** | 1. 点击"刷新"按钮 |
| **预期结果** | - 显示加载状态<br>- 数据重新加载完成 |
| **验证状态** | [ ] 待验证 |

### TC-009: 导出稿定格式 (ZIP+XLSX) - 核心功能
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证导出功能生成正确格式的文件 |
| **前置条件** | 飞书数据页面已加载且有数据 |
| **测试步骤** | 1. 点击"导出稿定格式"按钮<br>2. 等待下载完成<br>3. 解压 ZIP 文件<br>4. 用 Excel 打开 XLSX 文件 |
| **预期结果** | - 下载文件名格式：稿定设计-数据上传_YYYY-MM-DD.zip<br>- ZIP 内包含：稿定设计-数据上传.xlsx<br>- XLSX 第1行：警告说明（合并单元格 A1:Z1）<br>- XLSX 第2行：表头（页面、文本_1、文本_2）**三列都存在**<br>- XLSX 第3行起：数据（页面1、主标题、副标题）<br>- Sheet名称：文案表（横版） |
| **验证状态** | [ ] 待验证 |

### TC-010: 导出XLSX格式验证
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证XLSX文件使用共享字符串格式（稿定设计兼容） |
| **前置条件** | 已导出ZIP文件 |
| **测试步骤** | 1. 将 XLSX 文件扩展名改为 .zip<br>2. 解压该文件<br>3. 检查 xl/sharedStrings.xml 是否存在<br>4. 检查 xl/worksheets/sheet1.xml 中单元格类型 |
| **预期结果** | - 存在 xl/sharedStrings.xml 文件<br>- sheet1.xml 中单元格使用 t="s" 类型引用共享字符串 |
| **验证状态** | [ ] 待验证 |

### TC-011: 无数据时导出测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证无数据时导出按钮状态 |
| **前置条件** | 飞书表格中无数据 |
| **测试步骤** | 1. 访问飞书数据页面 |
| **预期结果** | - 导出按钮禁用<br>- 显示"暂无数据"提示 |
| **验证状态** | [ ] 待验证 |

---

## 四、上传图片功能测试

### TC-012: 上传图片页面加载
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证上传图片页面能正常加载 |
| **前置条件** | 飞书配置已正确保存 |
| **测试步骤** | 1. 点击导航菜单"上传图片" |
| **预期结果** | - 页面正常加载<br>- 显示文件上传区域<br>- 显示飞书表格数据预览 |
| **验证状态** | [ ] 待验证 |

### TC-013: 上传ZIP文件解析
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证能正确解析稿定设计导出的ZIP文件 |
| **前置条件** | 上传图片页面已加载 |
| **测试步骤** | 1. 准备稿定设计导出的图片ZIP文件<br>2. 拖拽或选择ZIP文件上传 |
| **预期结果** | - 显示解析进度<br>- 解析完成后显示图片预览<br>- 显示解析出的图片数量<br>- 图片按序号排序显示 |
| **验证状态** | [ ] 待验证 |

### TC-014: 上传图片到飞书 - 核心功能
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证能正确将图片上传到飞书多维表格 |
| **前置条件** | - ZIP文件已解析<br>- 飞书表格有对应数量的记录 |
| **测试步骤** | 1. 点击"上传到飞书"按钮<br>2. 等待上传完成 |
| **预期结果** | - 显示上传进度<br>- 上传完成后显示结果统计<br>- 成功数量 = 总数量<br>- 失败数量 = 0<br>- 在飞书多维表格中可以看到上传的图片 |
| **验证状态** | [ ] 待验证 |

### TC-015: 图片数量不匹配警告
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证图片数量与记录数量不匹配时的处理 |
| **前置条件** | ZIP文件中图片数量与飞书记录数量不一致 |
| **测试步骤** | 1. 上传包含不同数量图片的ZIP文件<br>2. 点击"上传到飞书" |
| **预期结果** | - 显示数量不匹配的警告提示<br>- 按顺序匹配上传 |
| **验证状态** | [ ] 待验证 |

### TC-016: 非ZIP文件上传测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证上传非ZIP文件时的错误处理 |
| **前置条件** | 上传图片页面已加载 |
| **测试步骤** | 1. 尝试上传非ZIP文件（如.jpg、.png） |
| **预期结果** | 显示"请选择 ZIP 文件"错误提示 |
| **验证状态** | [ ] 待验证 |

### TC-017: 上传失败错误处理
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证上传失败时的错误提示 |
| **前置条件** | 飞书配置不正确或权限不足 |
| **测试步骤** | 1. 使用错误的飞书配置<br>2. 尝试上传图片 |
| **预期结果** | - 显示详细的错误信息<br>- 显示失败数量统计 |
| **验证状态** | [ ] 待验证 |

---

## 五、完整业务流程测试

### TC-018: 端到端完整流程测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证从飞书数据到稿定设计再回传飞书的完整流程 |
| **前置条件** | - 飞书多维表格已创建并有数据<br>- 稿定设计账号可用 |
| **测试步骤** | 1. 配置飞书凭证并测试连接<br>2. 在飞书数据页面查看数据<br>3. 导出稿定格式ZIP文件<br>4. 在稿定设计中使用批量套版功能导入ZIP<br>5. 在稿定设计中生成图片并下载ZIP<br>6. 在上传图片页面上传稿定设计的ZIP<br>7. 点击上传到飞书<br>8. 在飞书多维表格中验证图片 |
| **预期结果** | - 每个步骤都成功完成<br>- 飞书表格中显示正确的图片 |
| **验证状态** | [ ] 待验证 |

---

## 六、异常场景测试

### TC-019: 网络断开测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证网络断开时的错误处理 |
| **前置条件** | 应用已加载 |
| **测试步骤** | 1. 断开网络连接<br>2. 尝试各种操作 |
| **预期结果** | 显示友好的网络错误提示 |
| **验证状态** | [ ] 待验证 |

### TC-020: 飞书Token过期测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证Token过期时的自动刷新 |
| **前置条件** | 飞书配置已保存 |
| **测试步骤** | 1. 等待Token过期（或模拟过期）<br>2. 执行需要Token的操作 |
| **预期结果** | 自动刷新Token并完成操作 |
| **验证状态** | [ ] 待验证 |

### TC-021: 大文件上传测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证大文件上传的处理 |
| **前置条件** | 准备接近20MB限制的ZIP文件 |
| **测试步骤** | 1. 上传大文件 |
| **预期结果** | - 正常上传或显示文件过大提示<br>- 不会导致页面崩溃 |
| **验证状态** | [ ] 待验证 |

---

## 七、UI/UX测试

### TC-022: 响应式布局测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证不同屏幕尺寸下的显示效果 |
| **前置条件** | 无 |
| **测试步骤** | 1. 在桌面浏览器查看<br>2. 调整窗口大小<br>3. 使用移动设备模拟器 |
| **预期结果** | 各尺寸下布局合理，无溢出或重叠 |
| **验证状态** | [ ] 待验证 |

### TC-023: 加载状态显示测试
| 项目 | 内容 |
|------|------|
| **测试目的** | 验证各操作的加载状态显示 |
| **前置条件** | 无 |
| **测试步骤** | 1. 执行各种异步操作<br>2. 观察加载状态 |
| **预期结果** | - 所有异步操作显示加载指示器<br>- 加载完成后指示器消失 |
| **验证状态** | [ ] 待验证 |

---

## 测试结果汇总

| 测试类别 | 用例数量 | 通过 | 失败 | 待验证 |
|---------|---------|------|------|--------|
| 首页功能 | 2 | 0 | 0 | 2 |
| 飞书配置 | 4 | 0 | 0 | 4 |
| 飞书数据 | 5 | 0 | 0 | 5 |
| 上传图片 | 6 | 0 | 0 | 6 |
| 完整流程 | 1 | 0 | 0 | 1 |
| 异常场景 | 3 | 0 | 0 | 3 |
| UI/UX | 2 | 0 | 0 | 2 |
| **总计** | **23** | **0** | **0** | **23** |

---

## 关键验证点清单

### Bug修复验证

- [ ] **Bug 1 修复验证**: 导出的XLSX文件包含三列（页面、文本_1、文本_2）
- [ ] **Bug 2 修复验证**: 飞书上传图片功能正常工作，无失败

### 核心功能验证

- [ ] 飞书配置保存和测试连接正常
- [ ] 飞书数据获取和显示正常
- [ ] 导出ZIP+XLSX格式正确
- [ ] XLSX使用共享字符串格式（稿定设计兼容）
- [ ] ZIP解析和图片预览正常
- [ ] 图片上传到飞书正常

---

## 测试执行记录

### 执行日期: ____

| 用例编号 | 执行人 | 结果 | 备注 |
|---------|-------|------|------|
| TC-001 | | | |
| TC-002 | | | |
| ... | | | |

---

**文档维护者**: Manus AI Agent  
**最后更新**: 2026-01-05
